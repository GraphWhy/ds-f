{% extends "base.html" %}

{% block page %}
<div class="storyView">
  <div class="title-storyView shadow">{{ story.title }}</div>
  <div class="s-date shadow">
    <span>{{ story.creationDate.split('T')[0] }}</span>
  </div>
  <div class="text text-storyView shadow">
    <p>{{ story.narrative }}</p>
  </div>
  <div class="question">
    <div class="questionText keyPoint shadow">{{ question.title }}</div>
    <div class="answers">
    {% for answer in question.answers %}
      <form action="/story/{{ story.storyId }}/vote/{{ loop.index - 1 }}" method="POST">
        <button class="answer clickable shadow">{{ loop.index }}. {{ answer.name }}</button>
      </form>
    {% endfor %}
    </div>
  </div>
  <div class="statistics">
    <div class="totalVotes shadow">
      <span class="total keyPoint">Total Votes</span>
      <span class="statistic keyPoint">{{ question.totalVotes }} votes</span>
    </div>

    <div class="superWrapper supperWrapper-storyView">
      <div class="demographicGrid">
      {% for answer in question.answers %}
        <div class="dataPoint">
          <span class="rank shadow">{{ loop.index }}</span>
          <div class="votes votes-storyView shadow">{{ answer.votes }}</div>
        </div>
      {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}

